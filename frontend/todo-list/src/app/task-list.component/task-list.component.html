<h1 class="page-title" >{{title}}</h1>
<!-- Task list with drag-and-drop support -->

<div class="task-pane">
  <div class="task-scroll">
    <ul class="task-list"  cdkDropList (cdkDropListDropped)="drop($event)" >      
      <!-- Loop through ticked tasks and render each one using TaskTileComponent -->
        @for (task of tasks; track task.id) {
          @if (!task.checked) {
            <li cdkDrag>
            <!-- Pass task data to task-tile component -->
            <!-- Listen to toggleChecked event and handle it in toggleChecked() method -->
            <app-task-tile 
              [task]="task"
              (toggleChecked)="toggleChecked($event)"
              (openMenu)="showContextMenu($event)">
            </app-task-tile>
            </li>
          }
        }

      <!-- Divider: the “Completed” button -->
      <li class="completed-toggle" cdkDragDisabled>
        <button type="button">Completed</button>
      </li>

      <!-- Loop through unticked tasks and render each one using TaskTileComponent -->
        @for (task of tasks; track task.id) {
          @if (task.checked) {
            <li cdkDragDisabled >
            <!-- Pass task data to task-tile component -->
            <!-- Listen to toggleChecked event and handle it in toggleChecked() method -->
            <app-task-tile
              [task]="task"
              (toggleChecked)="toggleChecked($event)"
              (openMenu)="showContextMenu($event)">
            </app-task-tile>
            </li>
          }
        }
      </ul>
  </div>
  <!-- Add row lives outside the scroller so it stays docked -->
  <ul class="task-list">
  <li class="add-tile" [class.typing]="addTypingClass">
    <input type="checkbox" class="todo-checkbox" tabindex="-1" />
    <input
      class="new-task-input"
      type="text"
      placeholder="Add a task"
      #taskInput
      (input)="addTypingClass = taskInput.value.trim().length > 0"
      (keydown.enter)="addTask(taskInput.value.trim()); taskInput.value=''; addTypingClass=false"
    />
  </li>
  </ul>
</div>



<!-- Context Menu -->
@if (contextMenuVisible) {
  <div
    id="context-menu"
    class="context-menu"
    [style.left.px]="menuX"
    [style.top.px]="menuY"
    role="menu"
    (click)="hideContextMenu()"
  >
    <ul>
      <li class="disabled">Open</li>
      <li class="disabled">Rename</li>
      <li class="disabled">Move</li>
      <li class="disabled">Send</li>
      <li class="separator" aria-hidden="true"></li>
      @if (contextMenuTask) {
        <li (click)="deleteTask(contextMenuTask)">Delete</li>
      }
    </ul>
  </div>
}

    






