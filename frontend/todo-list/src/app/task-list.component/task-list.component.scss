/* task-list.component.scss */

/* ===== Tunables ===== */
:host {
  --tile-h: 56px;                 /* tile content height */
  --tile-vgap: 16px;              /* vertical gap between tiles */

  --tile-radius: 12px;
  --tile-shadow: 0 2px 6px rgba(0,0,0,.08);

  --column-max: 1080px;           /* column width */
  --side-pad: 24px;

  /* Blue background (Microsoft To Do-ish) */
  --bg-top: #5a76f3;
  --bg-bottom: #6b8cf2;

  /* Fill the viewport so the add-row can dock at the bottom */
  display: flex;
  flex-direction: column;
  height: 100svh;   /* was: min-height */
  height: 100vh;    /* fallback */
  overflow: hidden; /* prevent page-level scroll */
  min-height: 100svh;
  min-height: 100vh;

  /* NO LINES — just gradient */
  background: linear-gradient(180deg, var(--bg-top) 0%, var(--bg-bottom) 100%);
  background-attachment: fixed;

  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

/* ===== Layout containers (list scrolls, add row stays docked) ===== */
.task-pane {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;   /* take remaining height under the title */
  min-height: 0;    /* critical so overflow can engage */
}

.task-scroll {
  flex: 1 1 auto;
  min-height: 0;         /* critical in flex layouts */
  overflow-y: auto;      /* only this area scrolls */
}

/* Centered column */
.task-list {
  display: flex;
  flex-direction: column;
  margin: 0 auto;
  width: calc(100% - var(--side-pad) * 6);   /* fill page width (minus tiny gutter) */
  padding: 24px var(--side-pad) 0;

  /* was: padding-bottom to clear fixed footer — removed now */
}

.task-list li app-task-tile {
  display: block;
  width: 100%;
  height: 100%;
}

/* Tiles */
.task-list li {
  width: 100%;
  min-height: var(--tile-h);
  margin: calc(var(--tile-vgap) / 2) 0;
  padding: 0;

  display: flex;
  align-items: center;
  gap: 12px;

  background: #fff;
  border: 1px solid rgba(0,0,0,.04);
  border-radius: var(--tile-radius);
  box-shadow: var(--tile-shadow);
  transition: box-shadow .2s ease, background-color .2s ease;
}
.task-list li:hover { box-shadow: 0 4px 12px rgba(0,0,0,.12); }

/* Drag visuals */
.cdk-drag-preview {
  list-style: none !important;
  background: #fff;
  border-radius: var(--tile-radius);
  padding: 12px 16px;
  box-shadow: 0 8px 20px rgba(0,0,0,.15);
}
.cdk-drag-placeholder { opacity: .4; }

/* ===== Add row (as a normal <li> in its own <ul>) ===== */
/* Input fills the row neatly */
.add-tile .new-task-input {
  flex: 1;
  border: 0;
  outline: none;
  background: transparent;
  font-size: 16px;
}
.add-tile .new-task-input::placeholder { color: #8a9bb9; }

/* Show checkbox only when typing (class-based) */
.add-tile input[type="checkbox"] {
  opacity: 0;
  pointer-events: none;
  transition: opacity .15s ease;
}
.add-tile.typing input[type="checkbox"] {
  opacity: 1;
  pointer-events: auto;
}

/* ===== Context Menu ===== */
.context-menu {
  position: fixed;       /* avoid clipping inside scroll area */
  z-index: 9999;
  background: #fff;
  border: 1px solid #dfe3ea;
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0,0,0,.15);

  /* key bits */
  padding: 4px 0;
  min-width: 180px;        /* pick your width */
  max-width: 240px;        /* (optional) */
  overflow: hidden;        /* <-- prevents LI hover from spilling out */
}

.context-menu * { box-sizing: border-box; } /* keep padding in-bounds */

.context-menu ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.context-menu li {
  border-radius: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;             /* <-- item never wider than menu */
  padding: 10px 12px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
}

.context-menu li:hover { background: #f3f4f6; }

.context-menu li.delete { color: #d93025; }

/* Centered, clean page title */
.page-title {
  /* match the list width and center it */
  width: min(var(--column-max), calc(100% - var(--side-pad) * 2));
  margin: 24px auto 8px;
  padding: 8px 4px;

  text-align: center;
  color: #fff;

  /* typography */
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  font-size: clamp(22px, 2.8vw, 36px);
  letter-spacing: 0.2px;
  line-height: 1.2;

  /* subtle pop over the blue gradient */
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

/* Make the divider tile fully transparent in all states */
.task-list li.completed-toggle,
.task-list li.completed-toggle.cdk-drag,
.task-list li.completed-toggle.cdk-drag-disabled {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* Keep it transparent on hover, too */
.task-list li.completed-toggle:hover {
  background: transparent !important;
}

